# Deprecated
lane :tag_build_git do
  version = load_json(json_path: File.join(Dir.pwd, "../src/", "version.json"))

  add_git_tag(
    grouping: "builds/#{version["buildType"]}",
    includes_lane: false,
    prefix: "v",
    build_number: version["version"]
  )

  push_git_tags
end

platform :android do
  lane :tag_build_git do
    version = load_json(json_path: File.join(Dir.pwd, "../src/", "version.json"))

    add_git_tag(
      grouping: "builds/#{version["buildType"]}",
      includes_lane: false,
      prefix: "v",
      build_number: "#{version["version"]}-android"
    )

    push_git_tags
  end
end

platform :ios do
  lane :tag_build_git do
    version = load_json(json_path: File.join(Dir.pwd, "../src/", "version.json"))

    add_git_tag(
      grouping: "builds/#{version["buildType"]}",
      includes_lane: false,
      prefix: "v",
      build_number: "#{version["version"]}-ios"
    )

    push_git_tags
  end
end

private_lane :load_env do |options|
  Dotenv.overload("envs/.env.#{options[:env]}")
end

private_lane :do_clean do | options |
  # if !options[:skip_clean]
  #   sh("cd .. && sh scripts/factory-reset.sh")
  # end
end
